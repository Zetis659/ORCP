# ORCP — Optical Recognition of Cars and Prices
ORCP - это проект, цель которого - автоматизировать процесс идентификации автомобилей и определения их стоимости с использованием технологии оптического распознавания.
Этот проект включает в себя: сбор данных, обучение моделей и развёртывание Telegram бота для предоставления пользователям информации о марке и модели автомобиля, а так же его стоимости на основе фотографий автомобиля.

## Table of Contents
- [ORCP — Optical Recognition of Cars and Prices](#orcp--optical-recognition-of-cars-and-prices)
  - [Table of Contents](#table-of-contents)
  - [Project Overview](#project-overview)
  - [Usage](#usage)
    - [Parsing](#parsing)
      - [Необходимые библиотеки:](#необходимые-библиотеки)
      - [Необходимое стороннее ПО:](#необходимое-стороннее-по)
    - [Model Training - YOLOv8](#model-training---yolov8)
      - [Необходимые библиотеки:](#необходимые-библиотеки-1)
      - [Мой билд:](#мой-билд)
    - [Telegram bot](#telegram-bot)
      - [Необходимые библиотеки:](#необходимые-библиотеки-2)
  - [Data Collection](#data-collection)
  - [Model Training](#model-training)
  - [Telegram Bot](#telegram-bot-1)
  - [License](#license)
## Project Overview
**ORCP** включает в себя три основных этапа:

1. **Сбор данных**: Написание парсера, который сохранят информацию об авто по различным параметрам: стоимость, объём двигателя, налог и т.д. Помимо этого парсер сохраняет ссылки на фотографии авто в текстовые файлы для дальнейшего обучения.
2. **Обучение модели**: Используя загруженные ссылки, скачать фотографии автомобилей, отобрать подходящие фотографии для обучения, разделить на обучающую и тестовую выборки и обучить на этих данных модель.
3. **Telegram bot**: Реализую Telegram бота, позволяющего взаимодействовать с пользователями. Пользователи могут отправлять фотографии боту, который используя обученные модели, будет предоставлять информацию о марке, модели, годах выпуска и стоимости авто.

## Usage
Использовать репозиторий **ORCP** можно по разному, по этому напишу отдельно про каждый этап. У каждого раздела, есть своя папка, которая находится в SRC, а именно Parsing, YOLOv8 и Bot. Основные детали при их использовании будут указаны ниже.
### Parsing
В папке Parsing, есть несколько модулей, с помощью которых можно загружать информацию об автомобилях с сайта "auto.ru". Здесь будут указаны необходимые библиотеки, которые нужны для запуска парсера, а так же дополнительное ПО. 

Для просмотра логики парсинга, откройте пункт [Data Collection](#data-collection)

**Парсер будет корректно работать, только при выполнении всех условий ↓ УКАЗАННЫХ НИЖЕ ↓**
#### Необходимые библиотеки:
> **fake_useragents** - замена агента браузера, при парсинге
> 
> **user_agents** - фильтрация мобильных агентов
> 
> **requests** - запросы на сайт
> 
> **tqdm** - подсчёт оставшегося времени, при парсинге
> 
> **random** - генерация случайных чисел, при смене IP
> 
> **genericpath** - проверка существования папки
> 
> **sys** - импорт модулей из разных папок
>
> **os** - указание пути для файлов
>
> **time** - подсчёт затраченного времени
>
> **csv** - сохранение *csv* файлов

#### Необходимое стороннее ПО:
Для постоянного изменения IP во избежании появления *капчи* использовался: ~~Tor~~ "луковый" браузер. **Без данного ПО, код работать НЕ будет!**

Для того, чтобы контролируемо менять IP адрес нужно:
1. Установить "луковый" браузер
2. В папке "лукового" браузера найти конфигурационный файл *torrc*
3. В данном файле прописать дополнительные порты. Я добавил 100 портов, начиная с "SocksPort 9050" и заканчивая "SocksPort 9149". Каждый порт должен идти с новой строчки.

**Парсер будет корректно работать, только при выполнении всех условий ↑ УКАЗАННЫХ ВЫШЕ ↑**
___
### Model Training - YOLOv8
В качестве основы, для классификации и детекции автомобилей, мне послужила модель нейросети **YOLOv8**.
#### Необходимые библиотеки:
> **torch == 2.0.1** - фреймворк для работы с нейросетями
>
> **nvidia-cuda == 11.7** - для использования видеокарт nvidia при обучении
>
> **ultralytics** - для импорта модели YOLO
>
> **requests** - для запросов на сайт
>
> **os** - указание пути файлов
>
> **shutil** - создание копий исходных файлов
>
> **time** - подсчёт затраченного времени
>
> **random** - генерация случайных числе, при выборе train/test
#### Мой билд:
- OS: **Manjaro Linux 23.0.3 Uranos, GNOME 44.5, Core 6.1.55-1-MANJARO**
- GPU: **Nvidia RTX 2070 8Gb**
- Nvidia driver: **470.199.02**, CUDA 11.4 (Pre-installed)
- CUDA: **11.8** (Installed after Nvidia driver)
- CUDNN: **8.6** (Installed after CUDA)
- Python: **3.10.12**
___
### Telegram bot
Для использования Telegram бота, основным инструментом была библиотека aoigram 3.0 и библиотека asyncio - для выполнения асинхронных задач.
#### Необходимые библиотеки:
> **torch == 2.0.1** - фреймворк для работы с нейросетями
>
> **nvidia-cuda == 11.7** - для использования видеокарт nvidia при обучении
>
> **ultralytics** - для импорта модели YOLO
>
> **aiogram == 3.00** - для использования Telegram API
>
> **asyncio** - для асинхронных функций бота (приём сообщений, фото и т.д.)
>
> **pandas** - для работы с *csv* файлами
>
> **sys** - импорт модулей из разных папок
>
> **os** - указание пути для файлов
>
> **time** - подсчёт затраченного времени
>
> **datetime** - сохранение фото в формате d-m-Y-H-M-S

## Data Collection
!!Описание логики сбора данных!!
## Model Training
!!Описание обучения модели и анализа данных!!
## Telegram Bot
!!Описание использования Telegram юота!!
## License
License
ORCP is licensed under the MIT License - see the LICENSE file for details.
